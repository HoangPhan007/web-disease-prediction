{% extends "doctor_base.html" %}
{# Kế thừa template gốc "doctor_base.html" chứa bố cục chung cho bác sĩ #}

{%block title%}Appointment Requests{%endblock title%}
{# Đặt tiêu đề trang là "Appointment Requests" #}

{%block body%}
{# Bắt đầu phần nội dung chính (body) #}

<div class="container">
    {# Khối chứa toàn bộ nội dung với class Bootstrap container #}

    <h1 class="my-2 text-muted py-4 border-bottom">Pending Appointments</h1>
    {# Tiêu đề chính của trang với margin trên dưới (my-2), chữ màu nhạt (text-muted),
       padding trên dưới (py-4) và viền dưới (border-bottom) #}

    <div class="row my-3">
        {# Khối row dùng để chứa các card con với margin y 3 #}

        {% for app in appointment %}
        {# Lặp qua từng yêu cầu cuộc hẹn trong biến 'appointment' #}

        <div class="col-sm-12 my-3">
            {# Cột chiếm full chiều ngang trên màn hình nhỏ (12 cột), margin y 3 #}

            <div class="card">
                {# Card Bootstrap dùng để tạo khối thông tin với border và shadow #}

                <div class="card-body">
                    {# Phần nội dung chính bên trong card #}

                    <h5 class="card-title text-capitalize">
                        <b>Patient: </b> {{ app.user.first_name }} {{ app.user.last_name }}
                    </h5>
                    {# Tiêu đề trong card: tên bệnh nhân, chữ đầu viết hoa #}

                    <p class="card-text text-muted">
                        <i>
                            email: {{ app.email }}<br>phone: {{ app.phone }}
                        </i>
                    </p>
                    {# Thông tin email và số điện thoại bệnh nhân, chữ màu nhạt, in nghiêng #}

                    <hr>
                    {# Dòng kẻ ngang chia tách #}

                    <p><b>Appointment Date: </b>{{ app.appointmentDate.date }}</p>
                    {# Ngày hẹn của cuộc hẹn #}

                    <hr>
                    <p class="text-danger"><b>Status: {{ app.status }}</b></p>
                    {# Trạng thái cuộc hẹn, chữ màu đỏ (text-danger) và in đậm #}

                    <hr>
                    <p><b>Message: </b>
                    <i class="text-muted">
                        {{ app.message }}
                    </i>
                    </p>
                    {# Tin nhắn kèm theo của bệnh nhân, chữ nhạt và in nghiêng #}

                    <form method="post" action="{% url 'update_status' app.id %}">
                        {# Form gửi POST lên url có tên 'update_status' với tham số id cuộc hẹn #}

                        {% csrf_token %}
                        {# Token bảo vệ chống CSRF, bắt buộc trong Django form POST #}

                        <button type="submit" class="btn btn-primary">Schedule Appointment</button>
                        {# Nút bấm gửi form để bác sĩ xác nhận lên lịch #}

                    </form>

                </div>
            </div>
        </div>

        {% endfor %}
    </div>
    
</div>

{%endblock body%}
{# Kết thúc phần body #}
